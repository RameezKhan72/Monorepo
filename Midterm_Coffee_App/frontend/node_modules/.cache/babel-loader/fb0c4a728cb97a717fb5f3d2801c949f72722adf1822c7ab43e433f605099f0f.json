{"ast":null,"code":"var _jsxFileName = \"D:\\\\MAD TASKS\\\\React-Native-Coffee-App\\\\Midterm-full-coffee-ap-code---video\\\\Midterm full coffee ap code , video\\\\frontend\\\\src\\\\screens\\\\PaymentMethod.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport api from '../apiConfig';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PaymentMethod() {\n  _s();\n  const [method, setMethod] = useState('cash');\n  const navigate = useNavigate();\n  const selection = JSON.parse(localStorage.getItem('selection') || '[]');\n  const total = selection.reduce((s, it) => s + Number(it.price || 0), 0);\n  async function placeOrder() {\n    try {\n      const user = JSON.parse(localStorage.getItem('user') || 'null');\n      const body = {\n        userId: (user === null || user === void 0 ? void 0 : user.id) || null,\n        items: selection,\n        total,\n        paymentMethod: method\n      };\n      const res = await api('/order', {\n        method: 'POST',\n        body: JSON.stringify(body)\n      });\n      if (!res.ok) {\n        const d = await res.json();\n        alert(d.error || 'Order failed');\n        return;\n      }\n      const order = await res.json();\n      if (method === 'card') {\n        await api('/payment', {\n          method: 'POST',\n          body: JSON.stringify({\n            orderId: order.id,\n            method: 'card',\n            details: {}\n          })\n        });\n      }\n      localStorage.removeItem('selection');\n      alert('Order placed! id: ' + order.id);\n      navigate('/menu');\n    } catch (err) {\n      alert('Order error: ' + err.message);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"screen container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Payment\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"payment-methods\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"pm\",\n          checked: method === 'cash',\n          onChange: () => setMethod('cash')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 16\n        }, this), \" Cash on delivery\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          name: \"pm\",\n          checked: method === 'card',\n          onChange: () => setMethod('card')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 16\n        }, this), \" Card (mock)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Total: Rs \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn primary\",\n        onClick: placeOrder,\n        children: \"Place Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(PaymentMethod, \"r4WCRjYqBrQ5+roMzixUjMkOJBU=\", false, function () {\n  return [useNavigate];\n});\n_c = PaymentMethod;\nvar _c;\n$RefreshReg$(_c, \"PaymentMethod\");","map":{"version":3,"names":["React","useState","api","useNavigate","jsxDEV","_jsxDEV","PaymentMethod","_s","method","setMethod","navigate","selection","JSON","parse","localStorage","getItem","total","reduce","s","it","Number","price","placeOrder","user","body","userId","id","items","paymentMethod","res","stringify","ok","d","json","alert","error","order","orderId","details","removeItem","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","name","checked","onChange","onClick","_c","$RefreshReg$"],"sources":["D:/MAD TASKS/React-Native-Coffee-App/Midterm-full-coffee-ap-code---video/Midterm full coffee ap code , video/frontend/src/screens/PaymentMethod.js"],"sourcesContent":["import React, { useState } from 'react';\nimport api from '../apiConfig';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function PaymentMethod(){\n  const [method, setMethod] = useState('cash');\n  const navigate = useNavigate();\n  const selection = JSON.parse(localStorage.getItem('selection') || '[]');\n  const total = selection.reduce((s,it)=>s + Number(it.price || 0), 0);\n\n  async function placeOrder(){\n    try{\n      const user = JSON.parse(localStorage.getItem('user') || 'null');\n      const body = { userId: user?.id || null, items: selection, total, paymentMethod: method };\n      const res = await api('/order', { method: 'POST', body: JSON.stringify(body) });\n      if (!res.ok){ const d = await res.json(); alert(d.error || 'Order failed'); return; }\n      const order = await res.json();\n      if (method === 'card') {\n        await api('/payment', { method: 'POST', body: JSON.stringify({ orderId: order.id, method: 'card', details: {} }) });\n      }\n      localStorage.removeItem('selection');\n      alert('Order placed! id: ' + order.id);\n      navigate('/menu');\n    }catch(err){ alert('Order error: ' + err.message); }\n  }\n\n  return (\n    <div className='screen container'>\n      <h2>Payment</h2>\n      <div className='payment-methods'>\n        <label><input type='radio' name='pm' checked={method==='cash'} onChange={()=>setMethod('cash')} /> Cash on delivery</label>\n        <label><input type='radio' name='pm' checked={method==='card'} onChange={()=>setMethod('card')} /> Card (mock)</label>\n      </div>\n      <div className='summary'>\n        <div>Total: Rs {total}</div>\n        <button className='btn primary' onClick={placeOrder}>Place Order</button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}